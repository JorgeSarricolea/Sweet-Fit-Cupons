import{A as i}from"./config.rsRQa_My.js";import"./hoisted.CMiaz8LH.js";import"./PasswordInput.astro_astro_type_script_index_0_lang.uOyacqeA.js";function d(){document.getElementById("email").value.trim()&&document.getElementById("reset-password-popup").classList.remove("hidden")}document.getElementById("forgot-password").addEventListener("click",d);const c=document.getElementById("login-form");c.addEventListener("submit",async function(e){e.preventDefault();const o=document.getElementById("email").value.trim(),s=document.getElementById("password").value;if(!o||!s){alert("Por favor, complete todos los campos");return}try{const t=await fetch(`${i}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:s})});if(t.ok){const a=(await t.json()).token;localStorage.setItem("token",a),window.location.href="/admin"}else{const r=await t.json();throw new Error(r.error||"Error desconocido")}}catch(t){console.error("Error:",t),alert("Hubo un error al iniciar sesión")}});function l(){document.getElementById("reset-password-popup").classList.add("hidden"),n()}function n(){const e=document.getElementById("resetEmail");e&&(e.innerText=localStorage.getItem("resetEmail")||"")}function m(){const e=document.getElementById("email");e&&e.value.trim()?(document.getElementById("reset-password-popup").classList.remove("hidden"),localStorage.setItem("resetEmail",e.value.trim()),n()):alert("Por favor, ingresa tu correo electrónico antes de solicitar restablecer tu contraseña.")}document.getElementById("close-popup-button").addEventListener("click",function(){l()});document.getElementById("forgot-password").addEventListener("click",function(){m()});document.addEventListener("DOMContentLoaded",function(){n()});
